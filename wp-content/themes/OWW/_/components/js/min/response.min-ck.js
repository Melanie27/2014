/*!
 * Response   Responsive design toolkit
 * @link      http://responsejs.com
 * @author    Ryan Van Etten (c) 2011-2012
 * @license   MIT
 * @version   0.7.8
 * @requires  jQuery 1.7+
 *            -or- ender build jeesh (ender.jit.su)
 *            -or- zepto 0.8+ (zeptojs.com)
 */
!function(t,e,n){var i=t.jQuery||t.Zepto||t.ender||t.elo;"undefined"!=typeof module&&module.exports?module.exports=n(i):t[e]=n(i)}(this,"Response",function(t){function e(t){throw new TypeError(t?Z+"."+t:Z)}function n(t){return"number"==typeof t&&t===t}function i(t,e,n){var i,r=t.length,o=[];for(i=0;r>i;i++)o[i]=e.call(n,t[i],i,t);return o}function r(t){return"string"==typeof t?s(t.split(" ")):se(t)?s(t):[]}function o(t,e,n){if(null==t)return t;for(var i=0,r=t.length;r>i;)e.call(n||t[i],t[i],i++,t);return t}function u(t,e,n){var i,r=[],o=t.length,u=0;for(e=e||"",n=n||"";o>u;)i=t[u++],null==i||r.push(e+i+n);return r}function s(t,e,n){var i,r,o,u=0,s=0,a=[],c="function"==typeof e;if(!t)return a;for(n=(o=!0===n)?null:n,i=t.length;i>s;s++)r=t[s],o===!(c?e.call(n,r,s,t):e?typeof r===e:r)&&(a[u++]=r);return a}function a(t,e){var i,r;if(!t||!e)return t;if("function"!=typeof e&&n(r=e.length)){for(i=0;r>i;i++)void 0===e[i]||(t[i]=e[i]);t.length>i||(t.length=i)}else for(i in e)ue.call(e,i)&&void 0!==e[i]&&(t[i]=e[i]);return t}function c(t,e,i){return null==t?t:("object"==typeof t&&!t.nodeType&&n(t.length)?o(t,e,i):e.call(i||t,t),t)}function l(t){return function(e,n){var i=t();return e=i>=(e||0),n?e&&n>=i:e}}function f(t){var e=_.devicePixelRatio;return null==t?e||(f(2)?2:f(1.5)?1.5:f(1)?1:0):isFinite(t)?e&&e>0?e>=t:(t="only all and (min--moz-device-pixel-ratio:"+t+")",ze(t).matches?!0:!!ze(t.replace("-moz-","")).matches):!1}function h(t){return t.replace(Ve,"$1").replace(Oe,function(t,e){return e.toUpperCase()})}function p(t){return"data-"+(t?t.replace(Ve,"$1").replace(ke,"$1-$2").toLowerCase():t)}function d(t){var e;return t&&"string"==typeof t?"true"===t?!0:"false"===t?!1:"undefined"===t?e:"null"===t?null:(e=parseFloat(t))===+e?e:t:t}function g(t){return t?1===t.nodeType?t:t[0]&&1===t[0].nodeType?t[0]:!1:!1}function v(t,e){var n,i=arguments.length,r=g(this),u={},s=!1;if(i){if(se(t)&&(s=!0,t=t[0]),"string"==typeof t){if(t=p(t),1===i)return u=r.getAttribute(t),s?d(u):u;if(this===r||2>(n=this.length||1))r.setAttribute(t,e);else for(;n--;)n in this&&v.apply(this[n],arguments)}else if(t instanceof Object)for(n in t)t.hasOwnProperty(n)&&v.call(this,n,t[n]);return this}return r.dataset&&DOMStringMap?r.dataset:(o(r.attributes,function(t){t&&(n=String(t.name).match(Ve))&&(u[h(n[1])]=t.value)}),u)}function y(t){return this&&"string"==typeof t&&(t=r(t),c(this,function(e){o(t,function(t){t&&e.removeAttribute(p(t))})})),this}function m(t){return v.apply(t,ie.call(arguments,1))}function b(t,e){return y.call(t,e)}function w(t){for(var e,n=[],i=0,r=t.length;r>i;)(e=t[i++])&&n.push("["+p(e.replace($e,"").replace(".","\\."))+"]");return n.join()}function $(e){return t(w(r(e)))}function k(){return window.pageXOffset||G.scrollLeft}function O(){return window.pageYOffset||G.scrollTop}function V(t,e){var n=t.getBoundingClientRect?t.getBoundingClientRect():{};return e="number"==typeof e?e||0:0,{top:(n.top||0)-e,left:(n.left||0)-e,bottom:(n.bottom||0)+e,right:(n.right||0)+e}}function x(t,e){var n=V(g(t),e);return!!n&&n.right>=0&&n.left<=Le()}function M(t,e){var n=V(g(t),e);return!!n&&n.bottom>=0&&n.top<=He()}function j(t,e){var n=V(g(t),e);return!!n&&n.bottom>=0&&n.top<=He()&&n.right>=0&&n.left<=Le()}function A(t){var e={img:1,input:1,source:3,embed:3,track:3,iframe:5,audio:5,video:5,script:5},n=e[t.nodeName.toLowerCase()]||-1;return 4>n?n:null!=t.getAttribute("src")?5:-5}function z(t,n,i){var r;return t&&null!=n||e("store"),i="string"==typeof i&&i,c(t,function(t){r=i?t.getAttribute(i):0<A(t)?t.getAttribute("src"):t.innerHTML,null==r?b(t,n):m(t,n,r)}),X}function L(t,e){var n=[];return t&&e&&o(r(e),function(e){n.push(m(t,e))},t),n}function H(t,e){return"string"==typeof t&&"function"==typeof e&&(le[t]=e,fe[t]=1),X}function T(t){return K.on("resize",t),X}function W(t,e){var n,i,r=je.crossover;return"function"==typeof t&&(n=e,e=t,t=n),i=t?""+t+r:r,K.on(i,e),X}function C(t){return c(t,function(t){I(t),T(t)}),X}function D(t){return c(t,function(t){"object"==typeof t||e("create @args");var n,i=xe(Y).configure(t),r=i.verge,u=i.breakpoints,s=Me("scroll"),a=Me("resize");u.length&&(n=u[0]||u[1]||!1,I(function(){function t(){i.reset(),o(i.$e,function(t,e){i[e].decideValue().updateDOM()}).trigger(u)}function e(){o(i.$e,function(t,e){j(i[e].$e,r)&&i[e].updateDOM()})}var u=je.allLoaded,c=!!i.lazy;o(i.target().$e,function(t,e){i[e]=xe(i).prepareData(t),(!c||j(i[e].$e,r))&&i[e].updateDOM()}),i.dynamic&&(i.custom||ve>n)&&T(t,a),c&&(K.on(s,e),i.$e.one(u,function(){K.off(s,e)}))}))}),X}function N(t){return E[Z]===X&&(E[Z]=Q),"function"==typeof t&&t.call(E,X),X}function R(t,e,n){o(["inX","inY","inViewport"],function(i){(n||!e[i])&&(e[i]=function(e,n){return t(s(this,function(t){return!!t&&!n===X[i](t,e)}))})})}function S(t,e){return"function"==typeof t&&t.fn&&((e||void 0===t.fn.dataset)&&(t.fn.dataset=v),(e||void 0===t.fn.deletes)&&(t.fn.deletes=y),R(t,t.fn,e)),X}function F(e,n){return e=arguments.length?e:t,S(e,n)}if("function"!=typeof t)try{console.log("Response was unable to run due to missing dependency.")}catch(J){}var X,Y,P,B,E=this,Z="Response",Q=E[Z],U="init"+Z,_=window,q=document,G=q.documentElement,I=t.domReady||t,K=t(_),te=_.screen,ee=Array.prototype,ne=Object.prototype,ie=ee.slice,re=ee.concat,oe=ne.toString,ue=ne.hasOwnProperty,se=Array.isArray||function(t){return"[object Array]"===oe.call(t)},ae={width:[0,320,481,641,961,1025,1281],height:[0,481],ratio:[1,1.5,2]},ce={},le={},fe={},he={all:[]},pe=1,de=te.width,ge=te.height,ve=de>ge?de:ge,ye=de+ge-ve,me=function(){return de},be=function(){return ge},we=/[^a-z0-9_\-\.]/gi,$e=/^[\W\s]+|[\W\s]+$|/g,ke=/([a-z])([A-Z])/g,Oe=/-(.)/g,Ve=/^data-(.+)$/,xe=Object.create||function(t){function e(){}return e.prototype=t,new e},Me=function(t,e){return e=e||Z,t.replace($e,"")+"."+e.replace($e,"")},je={allLoaded:Me("allLoaded"),crossover:Me("crossover")},Ae=_.matchMedia||_.msMatchMedia,ze=Ae||function(){return{}},Le=function(t,e,n){var i=e.clientWidth,r=t.innerWidth;return n&&r>i&&!0===n("(min-width:"+r+"px)").matches?function(){return t.innerWidth}:function(){return e.clientWidth}}(_,G,Ae),He=function(t,e,n){var i=e.clientHeight,r=t.innerHeight;return n&&r>i&&!0===n("(min-height:"+r+"px)").matches?function(){return t.innerHeight}:function(){return e.clientHeight}}(_,G,Ae);return P=l(Le),B=l(He),ce.band=l(me),ce.wave=l(be),Y=function(){function n(t){return"string"==typeof t?t.toLowerCase().replace(we,""):""}var c=je.crossover,l=Math.min;return{$e:0,mode:0,breakpoints:null,prefix:null,prop:"width",keys:[],dynamic:null,custom:0,values:[],fn:0,verge:null,newValue:0,currValue:1,aka:null,lazy:null,i:0,uid:null,reset:function(){for(var t=this.breakpoints,e=t.length,n=0;!n&&e--;)this.fn(t[e])&&(n=e);return n!==this.i&&(K.trigger(c).trigger(this.prop+c),this.i=n||0),this},configure:function(t){a(this,t);var c,f,h,p,d,g=!0,v=this.prop;if(this.uid=pe++,this.verge=isFinite(this.verge)?this.verge:l(ve,500),this.fn=le[v]||e("create @fn"),"boolean"!=typeof this.dynamic&&(this.dynamic=!("device"===v.substring(0,6))),this.custom=fe[v],f=this.prefix?s(i(r(this.prefix),n)):["min-"+v+"-"],h=1<f.length?f.slice(1):0,this.prefix=f[0],d=this.breakpoints,se(d)?(o(d,function(t){if(!t&&0!==t)throw"invalid breakpoint";g=g&&isFinite(t)}),d=g?d.sort(function(t,e){return t-e}):d,d.length||e("create @breakpoints")):d=ae[v]||ae[v.split("-").pop()]||e("create @prop"),this.breakpoints=g?s(d,function(t){return ve>=t}):d,this.keys=u(this.breakpoints,this.prefix),this.aka=null,h){for(p=[],c=h.length;c--;)p.push(u(this.breakpoints,h[c]));this.aka=p,this.keys=re.apply(this.keys,p)}return he.all=he.all.concat(he[this.uid]=this.keys),this},target:function(){return this.$e=t(w(he[this.uid])),z(this.$e,U),this.keys.push(U),this},decideValue:function(){for(var t=null,e=this.breakpoints,n=e.length,i=n;null==t&&i--;)this.fn(e[i])&&(t=this.values[i]);return this.newValue="string"==typeof t?t:this.values[n],this},prepareData:function(e){if(this.$e=t(e),this.mode=A(e),this.values=L(this.$e,this.keys),this.aka)for(var n=this.aka.length;n--;)this.values=a(this.values,L(this.$e,this.aka[n]));return this.decideValue()},updateDOM:function(){return this.currValue===this.newValue?this:(this.currValue=this.newValue,0<this.mode?this.$e[0].setAttribute("src",this.newValue):null==this.newValue?this.$e.empty&&this.$e.empty():this.$e.html?this.$e.html(this.newValue):(this.$e.empty&&this.$e.empty(),this.$e[0].innerHTML=this.newValue),this)}}}(),le.width=P,le.height=B,le["device-width"]=ce.band,le["device-height"]=ce.wave,le["device-pixel-ratio"]=f,X={deviceMin:function(){return ye},deviceMax:function(){return ve},noConflict:N,chain:F,bridge:S,create:D,addTest:H,datatize:p,camelize:h,render:d,store:z,access:L,target:$,object:xe,crossover:W,action:C,resize:T,ready:I,affix:u,sift:s,dpr:f,deletes:b,scrollX:k,scrollY:O,deviceW:me,deviceH:be,device:ce,inX:x,inY:M,route:c,merge:a,media:ze,wave:B,band:P,map:i,each:o,inViewport:j,dataset:m,viewportH:He,viewportW:Le},I(function(){var e,n=m(q.body,"responsejs");n&&(e=!!_.JSON&&JSON.parse,e?n=e(n):t.parseJSON&&(n=t.parseJSON(n)),n&&n.create&&D(n.create)),G.className=G.className.replace(/(^|\s)(no-)?responsejs(\s|$)/,"$1$3")+" responsejs "}),X});