CodeMirror.defineMode("javascript",function(e,t){function r(e,t,r){return t.tokenize=r,r(e,t)}function n(e,t){for(var r=!1,n;null!=(n=e.next());){if(n==t&&!r)return!1;r=!r&&"\\"==n}return r}function a(e,t,r){return G=e,H=r,t}function i(e,t){var i=e.next();if('"'==i||"'"==i)return r(e,t,o(i));if(/[\[\]{}\(\),;\:\.]/.test(i))return a(i);if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(i)||"-"==i&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),a("number","number");if("/"==i)return e.eat("*")?r(e,t,c):e.eat("/")?(e.skipToEnd(),a("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e,"/"),e.eatWhile(/[gimy]/),a("regexp","string-2")):(e.eatWhile(F),a("operator",null,e.current()));if("#"==i)return e.skipToEnd(),a("error","error");if(F.test(i))return e.eatWhile(F),a("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),u=D.propertyIsEnumerable(l)&&D[l];return u&&"."!=t.lastType?a(u.type,u.style,l):a("variable","variable",l)}function o(e){return function(t,r){return n(t,e)||(r.tokenize=i),a("string","string")}}function c(e,t){for(var r=!1,n;n=e.next();){if("/"==n&&r){t.tokenize=i;break}r="*"==n}return a("comment","comment")}function l(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function u(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0}function s(e,t,r,n,a){var i=e.cc;for(K.state=e,K.stream=a,K.marked=null,K.cc=i,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=i.length?i.pop():q?k:x;if(o(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return K.marked?K.marked:"variable"==r&&u(e,n)?"variable-2":t}}}function f(){for(var e=arguments.length-1;e>=0;e--)K.cc.push(arguments[e])}function p(){return f.apply(null,arguments),!0}function d(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var r=K.state;if(r.context){if(K.marked="def",t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;r.globalVars={name:e,next:r.globalVars}}}function v(){K.state.context={prev:K.state.context,vars:K.state.localVars},K.state.localVars=L}function m(){K.state.localVars=K.state.context.vars,K.state.context=K.state.context.prev}function y(e,t){var r=function(){var r=K.state;r.lexical=new l(r.indented,K.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function b(){var e=K.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function h(e){return function(t){return t==e?p():";"==e?f():p(arguments.callee)}}function x(e){return"var"==e?p(y("vardef"),P,h(";"),b):"keyword a"==e?p(y("form"),k,x,b):"keyword b"==e?p(y("form"),x,b):"{"==e?p(y("}"),C,b):";"==e?p():"function"==e?p(A):"for"==e?p(y("form"),h("("),y(")"),O,h(")"),b,x,b):"variable"==e?p(y("stat"),w):"switch"==e?p(y("form"),k,y("}","switch"),h("{"),C,b,b):"case"==e?p(k,h(":")):"default"==e?p(h(":")):"catch"==e?p(y("form"),v,h("("),U,h(")"),x,b,m):f(y("stat"),k,h(";"),b)}function k(e){return J.hasOwnProperty(e)?p(M):"function"==e?p(A):"keyword c"==e?p(g):"("==e?p(y(")"),g,h(")"),b,M):"operator"==e?p(k):"["==e?p(y("]"),E(k,"]"),b,M):"{"==e?p(y("}"),E(j,"}"),b,M):p()}function g(e){return e.match(/[;\}\)\],]/)?f():f(k)}function M(e,t){if("operator"==e)return/\+\+|--/.test(t)?p(M):"?"==t?p(k,h(":"),k):p(k);if(";"!=e)return"("==e?p(y(")"),E(k,")"),b,M):"."==e?p(V,M):"["==e?p(y("]"),k,h("]"),b,M):void 0}function w(e){return":"==e?p(b,x):f(M,h(";"),b)}function V(e){return"variable"==e?(K.marked="property",p()):void 0}function j(e,t){if("variable"==e){if(K.marked="property","get"==t||"set"==t)return p(T)}else("number"==e||"string"==e)&&(K.marked=e+" property");return J.hasOwnProperty(e)?p(h(":"),k):void 0}function T(e){return":"==e?p(k):"variable"!=e?p(h(":"),k):(K.marked="property",p(A))}function E(e,t){function r(n){return","==n?p(e,r):n==t?p():p(h(t))}return function(n){return n==t?p():f(e,r)}}function C(e){return"}"==e?p():f(x,C)}function I(e){return":"==e?p(z):f()}function z(e){return"variable"==e?(K.marked="variable-3",p()):f()}function P(e,t){return"variable"==e?(d(t),B?p(I,W):p(W)):f()}function W(e,t){return"="==t?p(k,W):","==e?p(P):void 0}function O(e){return"var"==e?p(P,h(";"),S):p(";"==e?S:"variable"==e?N:S)}function N(e,t){return"in"==t?p(k):p(M,S)}function S(e,t){return";"==e?p($):"in"==t?p(k):p(k,h(";"),$)}function $(e){")"!=e&&p(k)}function A(e,t){return"variable"==e?(d(t),p(A)):"("==e?p(y(")"),v,E(U,")"),b,x,m):void 0}function U(e,t){return"variable"==e?(d(t),B?p(I):p()):void 0}var _=e.indentUnit,q=t.json,B=t.typescript,D=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={"if":t,"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":a,"typeof":a,"instanceof":a,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i,"this":e("this")};if(B){var c={type:"variable",style:"variable-3"},l={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:c,number:c,bool:c,any:c};for(var u in l)o[u]=l[u]}return o}(),F=/[+\-*&%=<>!?|~^]/,G,H,J={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},K={state:null,column:null,marked:null,cc:null},L={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(e){return{tokenize:i,lastType:null,cc:[],lexical:new l((e||0)-_,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==G?r:(t.lastType=G,s(t,r,G,H,e))},indent:function(e,t){if(e.tokenize==c)return CodeMirror.Pass;if(e.tokenize!=i)return 0;var r=t&&t.charAt(0),n=e.lexical;"stat"==n.type&&"}"==r&&(n=n.prev);var a=n.type,o=r==a;return"vardef"==a?n.indented+("operator"==e.lastType||","==e.lastType?4:0):"form"==a&&"{"==r?n.indented:"form"==a?n.indented+_:"stat"==a?n.indented+("operator"==e.lastType||","==e.lastType?_:0):"switch"!=n.info||o?n.align?n.column+(o?0:1):n.indented+(o?0:_):n.indented+(/^(?:case|default)\b/.test(t)?_:2*_)},electricChars:":{}",jsonMode:q}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0});