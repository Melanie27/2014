function wpcfAccessReset(e){return jQuery("#wpcf_access_admin_form").find(".dep-message").hide(),jQuery.ajax({url:e.attr("href")+"&button_id="+e.attr("id"),type:"get",dataType:"json",cache:!1,beforeSend:function(){},success:function(c){if(null!=c&&"undefined"!=typeof c.output&&"undefined"!=typeof c.button_id){var s=jQuery("#"+c.button_id).parent();jQuery.each(c.output,function(c,a){e=s.find('input[id*="_permissions_'+c+"_"+a+'_role"]'),e.trigger("click").attr("checked","checked")})}}}),!1}function wpcfAccessApplyLevels(e){return jQuery.ajax({url:ajaxurl,type:"post",dataType:"json",data:e.parent().find(".wpcf-access-custom-roles-select").serialize()+"&_wpnonce="+wpcf_nonce_ajax_callback+"&action=wpcf_access_ajax_set_level",cache:!1,beforeSend:function(){jQuery("#wpcf-access-custom-roles-table-wrapper").css("opacity",.5)},success:function(e){null!=e&&"undefined"!=typeof e.output&&(window.location="admin.php?page=wpcf-access#custom-roles",window.location.reload(!0))}}),!1}function wpcfAccessEnable(e){e.is('input[type="checkbox"]')&&e.is(":checked")||e.is('input[type="radio"]')&&"not_managed"!=e.val()?wpcfAccessEnableInputs(e,!0):wpcfAccessEnableInputs(e,!1)}function wpcfAccessEnableInputs(e,c){c?(e.parent().find(".wpcf-enable-set").val(e.val()),e.parent().parent().parent().find("table input, .wpcf-access-submit, .wpcf-access-reset").not(':checkbox[value="administrator"]').removeAttr("readonly").removeAttr("disabled"),e.parent().parent().parent().find(".warning-fallback").hide()):(e.parent().find(".wpcf-enable-set").val("not_managed"),e.parent().parent().parent().find("table input, .wpcf-access-reset").attr("readonly","readonly").attr("disabled","disabled"),e.parent().parent().parent().find(".warning-fallback").show())}function wpcfAccessAutoThick(e,c,s){var a=new Array,t=new Array,n=e.is(":checked"),r=e.val(),i="wpcf_access_dep_true_"+c,p="wpcf_access_dep_false_"+c,u=new Array;n?"undefined"!=typeof window[i]&&(a=a.concat(window[i])):"undefined"!=typeof window[p]&&(t=t.concat(window[p])),jQuery.each(a,function(c,s){e.parents("table").find(":checkbox").each(function(){jQuery(this).attr("id")!=e.attr("id")&&jQuery(this).val()==r&&jQuery(this).hasClass("wpcf-access-"+s)&&(0==jQuery(this).is(":checked")&&u.push(jQuery(this).data("wpcfaccesscap")),jQuery(this).attr("checked","checked").attr("name",jQuery(this).data("wpcfaccessname")),wpcfAccessThickTd(jQuery(this),"prev",!0))})}),jQuery.each(t,function(c,s){e.parents("table").find(":checkbox").each(function(){if(jQuery(this).attr("id")!=e.attr("id")&&jQuery(this).val()==r&&jQuery(this).hasClass("wpcf-access-"+s)){jQuery(this).is(":checked")&&u.push(jQuery(this).data("wpcfaccesscap")),jQuery(this).removeAttr("checked").attr("name","dummy");var c=jQuery(this).parent().prev().find(":checkbox");c.is(":checked")&&c.attr("checked","checked").attr("name",c.data("wpcfaccessname")),wpcfAccessThickTd(jQuery(this),"next",!1)}})}),wpcfAccessThickTd(e,"next",!1),wpcfAccessThickTd(e,"prev",!0),e.is(":checked")?e.attr("name",s):(e.attr("name","dummy"),e.parent().prev().find(":checkbox").attr("checked","checked").attr("name",s)),"administrator"==e.val()&&e.attr("name",s).attr("checked","checked"),wpcfAccessDependencyMessageShow(e,c,u,n)}function wpcfAccessThickTd(e,c,s){if("next"==c)var a=e.parent().nextAll("td").find(":checkbox");else var a=e.parent().prevAll("td").find(":checkbox");a.each(s?function(){jQuery(this).attr("checked","checked").attr("name","dummy")}:function(){jQuery(this).removeAttr("checked").attr("name","dummy")})}function wpcfAccessDependencyMessageShow(e,c,s,a){var t=wpcfAccessDependencyMessage(c,s,a),n=e.parents(".wpcf-access-type-item").find(".dep-message");n.hide().html(""),0!=t&&n.html(t).show()}function wpcfAccessDependencyMessage(e,c,s){var a=window.wpcf_access_dep_active_messages_pattern_singular,t=window.wpcf_access_dep_active_messages_pattern_plural,n=window.wpcf_access_dep_inactive_messages_pattern_singular,r=window.wpcf_access_dep_inactive_messages_pattern_singular,i=new Array,p=!1;if(jQuery.each(c,function(c,a){if(s){var t=window["wpcf_access_dep_true_"+e].indexOf(a);i.push(window["wpcf_access_dep_true_"+e+"_message"][t])}else{var t=window["wpcf_access_dep_false_"+e].indexOf(a);i.push(window["wpcf_access_dep_false_"+e+"_message"][t])}}),c.length>0){if(s)if(c.length<2)var p=a.replace("%cap",window["wpcf_access_dep_"+e+"_title"]);else var p=t.replace("%cap",window["wpcf_access_dep_"+e+"_title"]);else if(c.length<2)var p=n.replace("%cap",window["wpcf_access_dep_"+e+"_title"]);else var p=r.replace("%cap",window["wpcf_access_dep_"+e+"_title"]);p=p.replace("%dcaps",i.join("', '"))}return p}jQuery(document).ready(function(){jQuery(".wpcf-access-edit-type").click(function(){jQuery(this).hide().parent().find(".wpcf-access-mode").slideToggle()}),jQuery(".wpcf-access-edit-type-done").click(function(){jQuery(this).parents(".wpcf-access-mode").slideToggle().parent().find(".wpcf-access-edit-type").show()}),jQuery(".wpcf-access-type-item .not-managed").click(function(){jQuery(this).is(":checked")&&0==jQuery(this).parents(".wpcf-access-mode").find(".follow").is(":checked")?wpcfAccessEnableInputs(jQuery(this),!0):wpcfAccessEnableInputs(jQuery(this),!1)}),jQuery(".wpcf-access-type-item .follow").click(function(){0==jQuery(this).is(":checked")&&jQuery(this).parents(".wpcf-access-mode").find(".not-managed").is(":checked")?wpcfAccessEnableInputs(jQuery(this),!0):wpcfAccessEnableInputs(jQuery(this),!1)}),jQuery(".wpcf-access-type-item .follow").each(function(){0==jQuery(this).is(":checked")&&jQuery(this).parents(".wpcf-access-mode").find(".not-managed").is(":checked")?wpcfAccessEnableInputs(jQuery(this),!0):wpcfAccessEnableInputs(jQuery(this),!1)}),jQuery(".wpcf-access-type-item .not-managed").each(function(){jQuery(this).is(":checked")&&0==jQuery(this).parents(".wpcf-access-mode").find(".follow").is(":checked")?wpcfAccessEnableInputs(jQuery(this),!0):wpcfAccessEnableInputs(jQuery(this),!1)}),jQuery('select[name^="wpcf_access_bulk_set"]').change(function(){var e=jQuery(this).val();"0"!=e&&jQuery(this).parent().find("select").each(function(){jQuery(this).val(e)})}),jQuery(".wpcf-access-change-level").live("click",function(){jQuery(this).hide().parent().find(".wpcf-access-custom-roles-select-wrapper").slideDown()}),jQuery(".wpcf-access-change-level-cancel").live("click",function(){jQuery(this).parent().slideUp().parent().find(".wpcf-access-change-level").show()}),jQuery(".wpcf-access-change-level-apply").live("click",function(){wpcfAccessApplyLevels(jQuery(this))}),jQuery("#wpcf_access_admin_form .wpcf-access-submit").click(function(){var e=jQuery(this),c=jQuery(this).next();return jQuery("#wpcf_access_admin_form").find(".dep-message").hide(),c.css("visibility","visible").animate({opacity:1},0),jQuery.ajax({url:ajaxurl,type:"post",data:jQuery("#wpcf_access_admin_form").serialize(),cache:!1,beforeSend:function(){},success:function(s){c.animate({opacity:0},200),e.parents(".wpcf-access-type-item").css("background-color","#FFFF9C").animate({backgroundColor:"##F7F7F7"},1500)}}),!1}),jQuery("#wpcf-access-new-role .button").click(function(){jQuery("#wpcf-access-new-role .toggle").show().find(".input").val("").focus(),jQuery("#wpcf-access-new-role .ajax-response").html("")}),jQuery("#wpcf-access-new-role .cancel").click(function(){jQuery("#wpcf-access-new-role .confirm").attr("disabled","disabled"),jQuery("#wpcf-access-new-role .toggle").hide().find(".input").val(""),jQuery("#wpcf-access-new-role .ajax-response").html("")}),jQuery("#wpcf-access-new-role .confirm").click(function(){return jQuery(this).attr("disabled")?!1:(jQuery(this).attr("disabled","disabled"),jQuery("#wpcf-access-new-role .img-waiting").show(),jQuery("#wpcf-access-new-role .ajax-response").html(""),void jQuery.ajax({url:ajaxurl,type:"post",dataType:"json",data:"action=wpcf_access_add_role&role="+jQuery("#wpcf-access-new-role .input").val(),cache:!1,beforeSend:function(){},success:function(e){jQuery("#wpcf-access-new-role .img-waiting").hide(),"false"==e.error?(jQuery("#wpcf-access-new-role .input").val(""),jQuery("#wpcf-access-custom-roles-wrapper").html(e.output)):jQuery("#wpcf-access-new-role .ajax-response").html(e.output)}}))}),jQuery("#wpcf-access-new-role .input").keyup(function(){jQuery("#wpcf-access-new-role .ajax-response").html(""),jQuery(this).val().length>4?jQuery("#wpcf-access-new-role .confirm").removeAttr("disabled"):jQuery("#wpcf-access-new-role .confirm").attr("disabled","disabled")}),jQuery("#wpcf-access-delete-role").live("click",function(){jQuery(this).next().show()}),jQuery(".wpcf-access-reassign-role-popup .confirm").live("click",function(){return jQuery(this).attr("disabled")?!1:(jQuery(".wpcf-access-reassign-role-popup .img-waiting").show(),void jQuery.ajax({url:ajaxurl,type:"post",dataType:"json",data:"action=wpcf_access_delete_role&"+jQuery(this).parents(".wpcf-access-reassign-role-popup").find(":input").serialize(),cache:!1,beforeSend:function(){},success:function(e){jQuery(".wpcf-access-reassign-role-popup .img-waiting").hide(),"false"==e.error?(tb_remove(),jQuery("#wpcf-access-custom-roles-wrapper").html(e.output)):jQuery(".wpcf-access-reassign-role-popup .ajax-response").html(e.output)}}))}),jQuery(".wpcf-access-reassign-role-popup select").change(function(){jQuery(this).parents(".wpcf-access-reassign-role-popup").find(".confirm").removeAttr("disabled")}),jQuery(".wpcf-access-type-item").find(".wpcf-access-mode").prepend('<div class="dep-message" style="display:none;"></div>'),jQuery(':checkbox[value="administrator"]').attr("disabled","disabled").attr("readonly","readonly").attr("checked","checked")});